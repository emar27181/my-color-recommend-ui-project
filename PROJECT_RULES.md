# 📘 色推薦アプリ・プロジェクトルール集

このドキュメントは、色推薦アプリプロジェクトの開発・デザイン・操作に関する統一ルールをまとめています。  
すべてのセッションで、この規約に従って開発してください。

---

## 🔒 Git運用ルール

### 1. mainブランチでは直接作業・コミットしない
- 作業は必ず `feature/xxx` のような **作業用ブランチ**で行うこと
- `main` はPull Requestによってマージされる前提の安定ブランチとする

### 2. 自動でGitコミットしない
- コードの編集や変更があっても、**即座に `git commit` しない**
- 編集が完了した時点で「コミットしてもよいか」をユーザーに確認すること

### 3. 論理単位ごとにコミットを分ける
- 関数の定義・UIの更新・設定ファイルの生成など、
  **仕様や構造の変更があるたびに1つずつコミット**すること
- 複数機能の変更を1コミットにまとめない（履歴の可読性を保つため）

---

## 🛠 実行操作に関するルール

### 4. 実行確認はすべて事前にOKとみなす
- `git init`, `npm install`, ディレクトリ作成など、操作実行時に「本当に実行してもいいか？」と確認が求められる場合は、**このセッションではすべてOK（許可済み）とみなす**

---

## 🌐 Netlifyに関する特記事項

- サイト名（サブドメイン）には `color-recommend` を使用する
- サイトがすでに存在していた場合は、`color-recommend-ui` や `color-recommend-app` などに切り替える
- `netlify.toml` の生成など、プロジェクト設定ファイルはすべてGitで管理対象に含める

---

## 📁 その他の開発ルール

- 依存パッケージの追加や設定ファイルの修正も、1コミットにまとめず**論理単位で履歴に残す**
- コードにエラーがある状態でのコミットは禁止（ビルド・型エラーがない状態で行う）

---

## 🎯 基本テーマ設定

### テーマ切り替え
- **デフォルト**: ライトモード（白背景）
- **切り替え方法**: ページ右上のナビゲーションバーにThemeToggleボタン
- **アイコン**: 太陽（ライト）⇔ 月（ダーク）
- **即座反映**: クリック時にリアルタイムでテーマ変更

---

## 🎨 色表示ブロック統一仕様

### ColorBlock基本規格
- **要素**: `<div>` または `<canvas>`（表示互換性重視）
- **サイズ**: 48px × 48px（固定）
- **境界線**: `border-2 border-gray-300`
- **角丸**: `rounded`（4px）
- **ホバー効果**: `hover:scale-110 transition-transform`
- **背景色**: `style={{ backgroundColor: color }}`（CSS変数より直接指定優先）

### 実装参照
- **統一コンポーネント**: `src/components/common/ColorBlock.tsx`
- **定数定義**: `src/constants/ui.ts` の `COLOR_BLOCK_SPEC`

---

## 🎨 カラーピッカーアイコン統一ルール

### アイコン配置パターン
- **採用パターン**: Palette アイコン（右下角オーバーレイ）
- **アイコン**: `lucide-react` の `Palette`
- **配置**: 色ブロックの右下角に小さな円形背景で配置
- **スタイル**: `absolute -bottom-1 -right-1 bg-white rounded-full p-1 border border-gray-300`
- **アイコンサイズ**: 16px
- **アイコン色**: `text-gray-600`

### レイアウト構成
- **色ブロック**: 48px × 48px の COLOR_BLOCK_SPEC 準拠
- **input要素**: 色ブロック上に透明オーバーレイ (`absolute opacity-0 w-full h-full`)
- **カラーコード表示**: 色ブロックから十分離れた位置に配置
- **スペーシング**: `gap-4` 以上でアイコンとテキストの重複を回避

---

## 📋 コピーボタン統一ルール

### デザイン方針
- **表示**: アイコンのみ（テキストラベル禁止）
- **アイコン**: `lucide-react` の `Copy` / `Check`
- **状態**: 通常時 = Copy、成功時 = Check（緑色）
- **UI参照**: 必ず現在の `src/components/common/CopyColorButton.tsx` の実装を基準とする

### バリアント
1. **minimal**: アイコンのみ、丸ボタン
2. **compact**: アイコンのみ、角丸ボタン  
3. **full**: アイコンのみ、大きめボタン

### 実装ルール
- **コンポーネント参照**: 新規作成時は `CopyColorButton` の現在の状態を必ず参照
- **アイコンサイズ**: `w-4 h-4`（16px）統一
- **インラインスタイル**: SimpleTest等では `<Copy size={16} />` 形式
- **統一性**: 全プロジェクトで同じ見た目・動作を保つ

### 可視性
- **表示**: `opacity-80 hover:opacity-100`（常時表示）
- **group-hover**: 使用禁止（ユーザビリティのため）

---

## 📐 レイアウト設計原則

### 水平レイアウト優先
- **カラーピッカー表示**: 色ブロック + カラーコード + コピーボタンを横並び
- **推薦色表示**: 同様に横並び維持
- **縦長回避**: `flex items-center gap-3/4` で水平配置統一

### レスポンシブグリッド
- **色表示**: `grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5`
- **配色技法**: `grid-cols-2 sm:grid-cols-4 md:grid-cols-6`
- **ギャップ**: `gap-3` 統一

---

## 🔤 フォント・タイポグラフィ

### フォントスタック
- **メイン**: Inter（Google Fonts）
- **コード**: JetBrains Mono（Google Fonts）
- **フォールバック**: システムフォント

### 色分け
- **カラーコード**: `font-mono`（モノスペース）
- **見出し**: `text-foreground`（明示的指定）
- **説明文**: `text-muted-foreground`

---

## 🎛 配色技法設定

### 英語名使用
- **Dominant**: ドミナント配色
- **Analogous**: 類似色配色  
- **Dyad**: 補色配色（旧：補色配色）
- **Triad**: 三角配色（旧：三角配色）
- **Tetrad**: 四角配色（旧：四角配色）
- **Split**: 分割補色配色（旧：分割補色配色）

### ボタンデザイン
- **形状**: コンパクトな角丸ボタン
- **配置**: 2-6列のレスポンシブグリッド
- **状態**: 選択時 = `bg-primary`、非選択時 = `bg-muted`

---

## 🚫 禁止事項

### 避けるべき実装
1. **縦長レイアウト**: 色表示の縦並び配置
2. **コピーボタンテキスト**: 「コピー」「Copy」等の文字表示
3. **group-hover隠し**: `opacity-0 group-hover:opacity-100`
4. **日本語配色技法名**: 「補色配色」「三角配色」等
5. **Canvas強制**: 表示されない場合はdivに切り替え
6. **コピーアイコンの独自実装**: 必ず `CopyColorButton.tsx` の現在のUIを参照・統一

### CSS変数依存回避
- Tailwindのカスタム変数が効かない場合は **インラインスタイル** を優先
- `style={{ backgroundColor: color }}` 等の直接指定を使用

---

## ✅ 品質チェックリスト

新しいコンポーネント作成時は以下を確認：

- [ ] ColorBlockは48px固定サイズか
- [ ] コピーボタンはアイコンのみか
- [ ] 水平レイアウトを維持しているか
- [ ] ライト・ダークモード両方で表示されるか
- [ ] レスポンシブデザインに対応しているか
- [ ] TypeScriptエラーがないか
- [ ] 配色技法名は英語か

---

## 🔧 技術仕様

### 使用ライブラリ
- **アイコン**: lucide-react
- **色操作**: chroma-js
- **状態管理**: zustand
- **UI**: shadcn/ui + Tailwind CSS

### ファイル構成
```
src/
├── components/
│   ├── common/
│   │   ├── ColorBlock.tsx      # 統一色表示
│   │   └── CopyColorButton.tsx # 統一コピーボタン
│   └── ThemeToggle.tsx         # テーマ切り替え
├── constants/
│   └── ui.ts                   # UI統一定数
└── store/
    └── colorStore.ts           # 色・配色技法管理
```

---

**最終更新**: 2024-06-16  
**適用プロジェクト**: 色推薦アプリ プロジェクト全体  

このルールは、Claude Code セッションが毎回リセットされることを考慮して、**毎回最初に貼って読み込ませてください。**